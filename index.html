<html>

<head>
    <script src="../celements/main.js" type="text/javascript"></script>
</head>

<body>

    <canvas id="screen"></canvas>
    <script type="text/javascript">
        celements.screen.init("screen");
        var tileset = new celements.Image().load("tiles.png");

        mapTileByNum = function(num) {
            var top = num % 38;
            var left = num - (top * 38);
            return [left*16, top*16];
        }

        mapGenerator = function(width, height) {
            var part = {};

            for (var w = 0; w < width; w++) {
                var line = [];
                for (var h = 0; h < height; h++) {
                    line.push(mapTileByNum(2));
                }
                part.push(line);
            }

            return part;
        }

        var player = {
            x: 0,
            y: 0
        };


        displayMapPart = function(x,y,map)
        {
          for (var w = 0; w < width; w++) {
              for (var h = 0; h < height; h++) {
                var tile = map[w,h];

                celeemtns.screen.tile(x+(w*16),y+(h*16),tileset,tile.left,tile.top,16,16,16,16);

              }
          }
        }

        var map = mapGenerator(100,100);

    celements.screen.loop(60, function() {

        displayMapPart(map);
    });


    </script>
</body>

</html>
