<html>

<head>
    <script src="../celements/main.js" type="text/javascript"></script>
</head>

<body>

    <canvas id="screen" style="width:100%;height:100%;position:absolute;top:0px;left:0px;"></canvas>
    <script type="text/javascript">
        celements.screen.init("screen");

        var demoimg = new celements.Image().load("bg.jpg");

        var slide_x = 0;

        var ball = {
            x: 100,
            y: 100,
            ymode: "down",
            xmode: "up",
            speed: 10,
            calc: function() {

                //moves
                if (ball.ymode == "up")
                    ball.y -= ball.speed;
                else if (ball.ymode == "down")
                    ball.y += ball.speed;

                if (ball.xmode == "up")
                    ball.x += ball.speed;
                else if (ball.xmode == "down")
                    ball.x -= ball.speed;

                //bounds
                if (ball.x < 40 && (ball.y > player.y && ball.y < player.y + 100)) {
                    ball.xmode = "up";
                    player.speed++;
                    ball.speed++;
                    ball.x = 100;
                } else if (ball.x > 460)
                    ball.xmode = "down";

                if (ball.y > 220)
                    ball.ymode = "up";
                else if (ball.y < 0)
                    ball.ymode = "down";
            }
        };

        var player = {
            x: 20,
            y: 50,
            ymode: "down",
            speed: 4,
            calc: function() {
                //moves
                if (ball.ymode == "down")
                    player.y += player.speed;
                else if (ball.ymode == "up")
                    player.y -= player.speed;

                //bounds
                if (player.y > 180)
                    player.ymode = "up";
                else if (player.y < 0)
                    player.ymode = "down";
            }
        };


        celements.screen.loop(60, function() {

            celements.screen.clear();

            celements.screen.blit(slide_x, 0, demoimg);
            celements.screen.blit(slide_x + 480, 0, demoimg);

            celements.screen.fillRect(player.x, player.y, 30, 100, "blue");
            celements.screen.fillRect(ball.x, ball.y, 10, 10, "white");
            celements.screen.fillRect(460, ball.y, 10, 50, "red");

            celements.screen.print(420, 270, celements.options.realfps + " FPS", "white");
            ball.calc();
            player.calc();
            slide_x -= player.speed;
            if (slide_x < -480) {
                slide_x = 0;
                player.speed = player.speed / 2;
            }
        });
    </script>

</body>

</html>
